{% extends 'home.html' %}

{% load static %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'Products/products_style.css' %}">
{% endblock %}

{% block title %}Product detail{% endblock %}

{% block content %}
    <h2>Product detail</h2>

    <table>
        <tr>
            <td><b>Title:</b></td>
            <td>{{ that_one_product.name }}<br></td>
        </tr>
        <tr>
            <td><b>Description:</b></td>
            <td>{{ that_one_product.description }}<br></td>
        </tr>
        <tr>
            <td><b>color scheme:</b></td>
            <td>{{ that_one_product.get_color_display }}<br></td>
        </tr>
        <tr>
            <td><b>Creator:</b></td>
            <td>{{ that_one_product.brand }}<br></td>
        </tr>
        <tr>
            <td><img src="{{ that_one_product.product_picture.url }}" height="150" width="150"><br></td>
        </tr>
        <tr>
            <td><a href="{% url 'pdf' that_one_product.id %}">Product PDF</a><br></td>
        </tr>
    </table>




    <span><small><small><small>{{ voteScore }}</small></small></small></span>
    {% for i in '12345'|make_list %}
        {% if voteScore >= forloop.counter %}
            <img src="{% static 'Products/Star_full.png' %}" height="20" width="20" alt="">
        {% else %}
            <img src="{% static 'Products/Star_empty.png' %}" height="20" width="20" alt="">
        {% endif %}
    {% endfor %}
    <span>{{ voteCount }} ratings</span>
    <br><br>

    {% if user.is_authenticated %}
        <br>
        <form method="POST">
            {% csrf_token %}
            <button type="submit">Add to shopping cart</button>
        </form>
    {% else %}
        <br><a href="{% url 'login' %}">Login</a> to add to shopping cart
        <br>
    {% endif %}

    {% for comment in comments_for_that_one_product %}
        <b style="color: darkgreen">{{ comment.user.username }} on {{ comment.timestamp }}</b>
        <span style="color: darkgreen">{{ comment.get_upvotes_count }}</span>
        <a href="{% url 'comment-vote' comment.id 'up' %}" style="text-decoration: none"><img
                src="{% static 'Products/arrow_up.png' %}" height="20" width="20" alt=""></a>
        <span style="color: crimson">{{ comment.get_downvotes_count }}</span>
        <a href="{% url 'comment-vote' comment.id 'down' %}" style="text-decoration: none"><img
                src="{% static 'Products/arrow_down.png' %}" height="20" width="20" alt=""></a>
        {% if user.username == comment.user.username %}
            <a href="{% url 'comment-delete' comment.id %}" style="text-decoration: none">
                <span style="color: darkslategray">delete</span></a>
        {% endif %}
        <br>

        {% for i in '12345'|make_list %}
            {% if comment.rating >= forloop.counter %}
                <img src="{% static 'Products/Star_full.png' %}" height="20" width="20" alt="">
            {% else %}
                <img src="{% static 'Products/Star_empty.png' %}" height="20" width="20" alt="">
            {% endif %}
        {% endfor %}
        {{ comment.text }}<br><br>
    {% endfor %}

    {% if user.is_authenticated %}
        <b style="color: crimson">Do you have a comment for this Product?</b><br>
        <form method="POST">
            {% csrf_token %}
            stars: {{ comment_form.rating }}
            <br>
            {{ comment_form.text }}
            <button type="submit">Add comment</button>
        </form>
    {% else %}
        <br><a href="{% url 'login' %}">Login</a> to add a product review
        <br>
    {% endif %}

    <br>
    <a href="{% url 'product-delete' that_one_product.id %}">delete product</a>
    <br>
    <a href="{% url 'all-products' %}">Back to all products</a>
{% endblock %}